!function(t){function s(e){if(i[e])return i[e].exports;var h=i[e]={i:e,l:!1,exports:{}};return t[e].call(h.exports,h,h.exports,s),h.l=!0,h.exports}var i={};s.m=t,s.c=i,s.d=function(t,i,e){s.o(t,i)||Object.defineProperty(t,i,{configurable:!1,enumerable:!0,get:e})},s.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return s.d(i,"a",i),i},s.o=function(t,s){return Object.prototype.hasOwnProperty.call(t,s)},s.p="",s(s.s=1)}([function(t,s,i){"use strict";var e=i(3);const{cos:h,sin:r}=Math;s.a=((t=0,s=0,i=0)=>new e.a(t,s,i))},function(t,s,i){"use strict";function e(t=0){o.drawImage(n,0,0),o.fillStyle="#111",o.fillRect(0,128,r.width,r.height),l.update(t),l.render(o),requestAnimationFrame(e)}Object.defineProperty(s,"__esModule",{value:!0});var h=i(2);const r=document.getElementById("fireworks"),o=r.getContext("2d");o.globalAlpha=.5;const n=document.getElementById("buffer"),a=n.getContext("2d");a.globalAlpha=1,a.font="48pt Sans-serif",a.textAlign="center",a.textBaseline="middle",a.fillStyle="#111",a.fillRect(0,0,800,128),a.fillStyle="rgba(200, 50, 105, 0.8)",a.fillText("Happy New Year",400,64);const l=new h.a({canvas:r,timestep:.01,gravity:15,launchPeriod:50,maxRockets:50});e()},function(t,s,i){"use strict";var e=i(0),h=i(4);const{cos:r,PI:o,random:n,sin:a}=Math;s.a=class{constructor(t={}){this.options=t,this.rockets=new Array,this.totalTime=0,this.lastTime=0,this._timer=null,this._launchRockets(t.launchPeriod)}update(t){for(let t of this.rockets)t.fire(),t.explode(this.options.timestep),t.applyForce(0,t.mass*this.options.gravity,0),t.update(this.options.timestep)}render(t){this.rockets.forEach(s=>s.show(t))}_launchRockets(t){this._timer=setInterval(()=>{for(let t=this.rockets.length-1;t>=0;t--){const s=this.rockets[t];s.exploded&&0===s.children.length&&this.rockets.splice(t,1)}if(this.rockets.length<this.options.maxRockets){let t=new h.a(this.options.canvas.width/2,this.options.canvas.height-1,0),s=(n(),.2*n()-.1),i=Object(e.a)(s,-1,0);i.normalize(),this.rockets.push(t),t.launch(i)}},t)}}},function(t,s,i){"use strict";const{sqrt:e,pow:h}=Math;class r{constructor(t=0,s=0,i=0){this.x=t,this.y=s,this.z=i}mag(){return e(h(this.x,2)+h(this.y,2)+h(this.z,2))}magSq(){return h(this.x,2)+h(this.y,2)+h(this.z,2)}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this}add(t,s,i){return this.x+=t,this.y+=s,this.z+=i,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this}sub(t,s,i){return this.x-=t,this.y-=s,this.z-=i,this}scale(t){return this.x*=t,this.y*=t,this.z*=t,this}set(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}set(t,s,i){return this.x=t,this.y=s,this.z=2*i,this}normalize(){const t=this.mag();return this.scale(1/t)}dist(t){return e(h(this.x-t.x,2)+h(this.y-t.y,2)+h(this.z-t.z,2))}distSq(t){return h(this.x-t.x,2)+h(this.y-t.y,2)+h(this.z-t.z,2)}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}clone(){return new r(this.x,this.y,this.z)}}s.a=r},function(t,s,i){"use strict";var e=i(0),h=i(5);const{abs:r,cos:o,PI:n,pow:a,random:l,sin:c,sqrt:u}=Math,{now:p}=Date,d=2*n;let f=0;s.a=class extends h.a{constructor(t,s,i=0){super(t,s,i),this.number=++f,this.mass=1,this.firing=!1,this.firingTime=1,this.launchTime=NaN,this.launchDir=Object(e.a)(),this.maxForce=300+200*l(),this.exploded=!1,this.explosionTime=NaN,this.hue=(64+2*f)%256}launch(t){this.launchDir.set(t.x,t.y,t.z),this.launchTime=p(),this.firing=!0}fire(){if(!this.firing)return;const t=(p()-this.launchTime)/1e3;if(t<this.firingTime){let s,i=t/this.firingTime,e=this.maxForce*(1+c(2*n*i-n/2))/2;this.flightTime>0?s=this.vel.clone().normalize().scale(e):(s=this.launchDir.clone().normalize().scale(e),this.vel.set(this.launchDir.x,this.launchDir.y,this.launchDir.z)),this.applyForce(s.x,s.y,s.z)}else this.firing=!1;this.flightTime=t}explode(t){if(!(this.firing||this.vel.y<=0))if(this.exploded){const s=2e3*(1+l());let i,h,o=Object(e.a)(0,0,0),n=Object(e.a)(0,0,0),a=this.children;for(let t=0;t<a.length-1;t++)for(let e=t+1;e<a.length;e++)o.set(a[e].pos.x-a[t].pos.x,a[e].pos.y-a[t].pos.y,a[e].pos.z-a[t].pos.z),i=1+o.magSq(),n.set(o.x,o.y,o.z).normalize(),h=s*a[t].mass*a[e].mass/i,a[t].applyForce(h*n.x,h*n.y,h*n.z),a[e].applyForce(-h*n.x,-h*n.y,-h*n.z);a.forEach(s=>{s.applyForce(0,40*r(s.mass),0),s.update(t)})}else{const t=50+100*l()|0,s=1+9*l();for(let i=0;i<t;i++){let t=this.pos.x-s/2+s*l(),i=this.pos.y-s/2+s*l(),e=this.pos.z-s/2+s*l(),r=new h.a(t,i,e);r.mass=.5+l()/2,l()<.5&&(r.mass*=-1),r.vel.set(this.vel.x,this.vel.y,this.vel.z),this.addChild(r)}this.explosionTime=p(),this.exploded=!0}}show(t){let s=this.vel.clone().normalize();if(!this.exploded){const i=(p()-this.launchTime)/1e3;let e=(1-1/(1+.01*i*i))/2;t.beginPath(),t.strokeStyle=`hsla(${this.hue},100%,50%,${e})`,t.lineWidth=4,t.moveTo(this.pos.x-10*s.x,this.pos.y-10*s.y),t.lineTo(this.pos.x+10*s.x,this.pos.y+10*s.y),t.stroke()}if(this.exploded){let s=(p()-this.explosionTime)/1e3,i=1/(1+s*s);for(let s of this.children){let e=this.pos.dist(s.pos);s.radius=1+50*(1-1/(1+.001*e)),s.pos.x-s.radius>0&&s.pos.x+s.radius<t.canvas.width&&s.pos.y-s.radius>0&&s.pos.y+s.radius<t.canvas.height&&(t.beginPath(),t.fillStyle=`hsla(${this.hue},100%,50%,${i})`,t.arc(s.pos.x,s.pos.y,s.radius,0,d),t.fill())}if(i<.01)for(let t=this.children.length-1;t>=0;t--)this.children.splice(t,1)}}}},function(t,s,i){"use strict";var e=i(0);const h=2*Math.PI;s.a=class{constructor(t,s,i=0){this.pos=Object(e.a)(t,s,i),this.vel=Object(e.a)(),this.acc=Object(e.a)(),this.force=Object(e.a)(),this.mass=Math.random(),this.parent=null,this.children=[],this.radius=1}addChild(t){t.parent=this,this.children.push(t)}applyForce(t){return this.force.add(t),this}applyForce(t,s,i){return this.force.add(t,s,i),this}update(t){this.acc.set(this.force.x/this.mass,this.force.y/this.mass,this.force.z/this.mass),this.pos.add(this.vel.x*t+this.acc.x*t*t/2,this.vel.y*t+this.acc.y*t*t/2,this.vel.z*t+this.acc.z*t*t/2),this.vel.add(this.acc.x*t,this.acc.y*t,this.acc.z*t),this.force.set(0,0,0)}show(t){t.fillStyle="#fff",t.beginPath(),t.arc(this.pos.x,this.pos.y,this.radius,0,h),t.fill()}}}]);